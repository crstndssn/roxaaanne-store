{{ 'section-blog-post.css' | asset_url | stylesheet_tag }}

  <article class="article-template">
  {%- for block in section.blocks -%}
    {%- case block.type -%}
      {%- when '@app' -%}
        <div class="page-width page-width--narrow">
          {% render block %}
        </div>
      {%- when 'featured_image' -%}
        {%- if article.image -%}
          <div class="w-full h-[200px] md:h-[470px] bg-gray-100 dark:bg-[#1c1c1c] overflow-hidden flex items-center justify-center">
            <img
              class="w-full"
              src="{{ article.image | image_url: width: master }}"
              width="{{ article.image.width }}"
              height="{{ article.image.height }}"
              alt="{{ article.image.alt | escape }}">
          </div>
        {%- endif -%}
      {%- when 'title' -%}
        <header class="page-width page-width--narrow{% if settings.animations_reveal_on_scroll %} scroll-trigger animate--fade-in{% endif %}" {{ block.shopify_attributes }}>
          <h1 class="text-4xl font-semibold mb-2 text-black dark:text-[#feffee]">
            {{ article.title | escape }}
          </h1>
          {%- if block.settings.blog_show_date -%}
            <span class="circle-divider caption-with-letter-spacing text-black dark:text-[#feffee]">
              {{- article.published_at | time_tag: format: 'date' -}}
            </span>
          {%- endif -%}
          {%- if block.settings.blog_show_author -%}
            <span class="caption-with-letter-spacing text-black dark:text-[#feffee]">
              <span>{{ article.author }}</span>
            </span>
          {%- endif -%}
        </header>

      {%- when 'content' -%}
        <div class="page-width page-width--narrow scroll-trigger animate--fade-in py-7 text-[19px] md:text-[20px] text-black dark:text-[#feffee]" {{ block.shopify_attributes }}>
          {{ article.content }}
        </div>

      {%- when 'share' -%}
        <div class="article-template__social-sharing page-width page-width--narrow{% if settings.animations_reveal_on_scroll %} scroll-trigger animate--slide-in{% endif %}" {{ block.shopify_attributes }}>
          {% assign share_url = request.origin | append: article.url %}
          {% render 'share-button'
            , block: block
            , share_link: share_url %}
        </div>
    {%- endcase -%}
  {%- endfor -%}

  {% comment %} <div class="article-template__back element-margin-top center{% if settings.animations_reveal_on_scroll %} scroll-trigger animate--slide-in{% endif %}">
        <a href="{{ blog.url }}" class="article-template__link link animate-arrow">
          <span class="icon-wrap">
            <span class="svg-wrapper">
              {{- 'icon-arrow.svg' | inline_asset_content -}}
            </span>
          </span>
          {{ 'blogs.article.back_to_blog' | t: title: blog.title | escape }}
        </a>
    </div> {% endcomment %}

  {%- if blog.comments_enabled? -%}
    <div class="container mx-auto px-7 md:px-0 py-12">
      <div class="max-w-3xl mx-auto">
        {%- if article.comments_count > 0 -%}
          <h2 class="text-3xl font-semibold mb-8 text-black dark:text-[#feffee]">
            {{ 'blogs.article.comments' | t: count: article.comments_count }}
          </h2>
          {% paginate article.comments by 5 %}
            <div class="space-y-6 mb-12">
              {%- for comment in article.comments -%}
                <article class="bg-[#feffee] dark:bg-[#1c1c1c] border-2 border-[#c9c9c9] dark:border-[#5a5a5a] rounded-xl p-6">
                  <div class="text-black dark:text-[#feffee] mb-4">{{ comment.content }}</div>
                  <footer class="flex items-center gap-3 text-sm text-gray-600 dark:text-gray-400">
                    <span class="font-semibold">{{ comment.author }}</span>
                    <span>â€¢</span>
                    <span>{{ comment.created_at | time_tag: format: 'date' }}</span>
                  </footer>
                </article>
              {%- endfor -%}
              {% render 'pagination'
                , paginate: paginate %}
            </div>
          {% endpaginate %}
        {%- endif -%}

        {% form 'new_comment'
          , article %}
          <h2 class="text-3xl font-semibold mb-6 text-black dark:text-[#feffee]">{{ 'blogs.article.comment_form_title' | t }}</h2>

          {%- if form.posted_successfully? -%}
            <div class="bg-green-100 dark:bg-green-900 border-2 border-green-500 rounded-xl p-4 mb-6">
              <p class="text-green-800 dark:text-green-200 font-medium">{{ 'blogs.article.success' | t }}</p>
            </div>
          {%- endif -%}

          {%- if form.errors -%}
            <div class="bg-red-100 dark:bg-red-900 border-2 border-red-500 rounded-xl p-4 mb-6">
              <p class="text-red-800 dark:text-red-200 font-medium mb-2">{{ 'templates.contact.form.error_heading' | t }}</p>
              <ul class="list-disc list-inside text-red-700 dark:text-red-300">
                {%- for field in form.errors -%}
                  <li>{{ form.errors.messages[field] }}</li>
                {%- endfor -%}
              </ul>
            </div>
          {%- endif -%}

          <div class="space-y-6">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div>
                <label for="CommentForm-author" class="block text-sm font-medium mb-2 text-black dark:text-[#feffee]">
                  {{ 'blogs.article.name' | t }}
                  <span class="text-red-500">*</span>
                </label>
                <input
                  type="text"
                  name="comment[author]"
                  id="CommentForm-author"
                  class="w-full px-4 py-3 bg-[#feffee] dark:bg-[#1c1c1c] border-2 border-[#c9c9c9] dark:border-[#5a5a5a] rounded-xl text-black dark:text-[#feffee] focus:border-black dark:focus:border-[#feffee] focus:outline-none"
                  value="{{ form.author }}"
                  required>
              </div>
              <div>
                <label for="CommentForm-email" class="block text-sm font-medium mb-2 text-black dark:text-[#feffee]">
                  {{ 'blogs.article.email' | t }}
                  <span class="text-red-500">*</span>
                </label>
                <input
                  type="email"
                  name="comment[email]"
                  id="CommentForm-email"
                  class="w-full px-4 py-3 bg-[#feffee] dark:bg-[#1c1c1c] border-2 border-[#c9c9c9] dark:border-[#5a5a5a] rounded-xl text-black dark:text-[#feffee] focus:border-black dark:focus:border-[#feffee] focus:outline-none"
                  value="{{ form.email }}"
                  required>
              </div>
            </div>

            <div>
              <label for="CommentForm-body" class="block text-sm font-medium mb-2 text-black dark:text-[#feffee]">
                {{ 'blogs.article.message' | t }}
                <span class="text-red-500">*</span>
              </label>
              <textarea
                rows="5"
                name="comment[body]"
                id="CommentForm-body"
                class="w-full px-4 py-3 bg-[#feffee] dark:bg-[#1c1c1c] border-2 border-[#c9c9c9] dark:border-[#5a5a5a] rounded-xl text-black dark:text-[#feffee] focus:border-black dark:focus:border-[#feffee] focus:outline-none resize-none"
                required>{{ form.body }}</textarea>
            </div>

            {%- if blog.moderated? -%}
              <p class="text-sm text-gray-600 dark:text-gray-400">{{ 'blogs.article.moderated' | t }}</p>
            {%- endif -%}

            <button type="submit" class="w-full bg-black text-[#feffee] py-4 px-8 rounded-xl text-[17px] font-[500] hover:bg-[#feffee] hover:text-black border-2 border-black dark:border-[#feffee] transition-colors">
              {{ 'blogs.article.post' | t }}
            </button>
          </div>
        {% endform %}
      </div>
    </div>
  {%- endif -%}
</article>

<script type="application/ld+json">
  {{ article | structured_data }}
</script>

{% schema %}
  {
    "name": "t:sections.main-article.name",
    "tag": "section",
    "class": "section",
    "blocks": [
      {
        "type": "@app"
      },
      {
        "type": "featured_image",
        "name": "t:sections.main-article.blocks.featured_image.name",
        "limit": 1,
        "settings": [
          {
            "type": "select",
            "id": "image_height",
            "options": [
              {
                "value": "adapt",
                "label": "t:sections.main-article.blocks.featured_image.settings.image_height.options__1.label"
              }, {
                "value": "small",
                "label": "t:sections.main-article.blocks.featured_image.settings.image_height.options__2.label"
              }, {
                "value": "medium",
                "label": "t:sections.main-article.blocks.featured_image.settings.image_height.options__3.label"
              }, {
                "value": "large",
                "label": "t:sections.main-article.blocks.featured_image.settings.image_height.options__4.label"
              }
            ],
            "default": "adapt",
            "label": "t:sections.main-article.blocks.featured_image.settings.image_height.label",
            "info": "t:sections.main-article.blocks.featured_image.settings.image_height.info"
          }
        ]
      },
      {
        "type": "title",
        "name": "t:sections.main-article.blocks.title.name",
        "limit": 1,
        "settings": [
          {
            "type": "checkbox",
            "id": "blog_show_date",
            "default": true,
            "label": "t:sections.main-article.blocks.title.settings.blog_show_date.label"
          }, {
            "type": "checkbox",
            "id": "blog_show_author",
            "default": false,
            "label": "t:sections.main-article.blocks.title.settings.blog_show_author.label"
          }
        ]
      },
      {
        "type": "content",
        "name": "t:sections.main-article.blocks.content.name",
        "limit": 1
      }, {
        "type": "share",
        "name": "t:sections.main-article.blocks.share.name",
        "limit": 2,
        "settings": [
          {
            "type": "text",
            "id": "share_label",
            "label": "t:sections.main-article.blocks.share.settings.text.label",
            "default": "t:sections.main-article.blocks.share.settings.text.default"
          }, {
            "type": "paragraph",
            "content": "t:sections.main-article.blocks.share.settings.featured_image_info.content"
          }, {
            "type": "paragraph",
            "content": "t:sections.main-article.blocks.share.settings.title_info.content"
          }
        ]
      }
    ]
  }
{% endschema %}
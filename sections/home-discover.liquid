<div class="container mx-auto px-8 mt-4 md:px-1">

  <div class="flex flex-col mb-10">
    {% comment %} EVENTOS TITULO {% endcomment %}
    {% if section.settings.events_title != blank %}
      <h2 class="text-[33px] md:text-[40px] text-black dark:text-[#feffee] font-[500] mb-3 md:mb-7 tracking-[-1.3px]">
        {{ section.settings.events_title }}
      </h2>
    {% endif %}

    <div class="grid grid-cols-1 md:grid-cols-2 gap-16 mb-10 md:mb-16">
      {% comment %} EVENTOS {% endcomment %}
      <div>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-8 mb-0">
          {% for block in section.blocks %}
            {% case block.type %}
              {% when 'event' %}
                <div class="flex flex-col gap-3 border border-black dark:border-[#131313] dark:bg-[#131313] p-3 rounded-xl {% if block.settings.muted %}opacity-50{% endif %}" {{ block.shopify_attributes }}>
                  <div class="flex gap-5">
                    <div class="flex justify-center items-center bg-[#2A2A2A] text-white flex flex-col px-8 py-4 rounded-xl min-w-[78px] h-fit">
                      <h3 class="text-white text-[30px] leading-[30px] font-medium">{{ block.settings.day }}</h3>
                      <h4 class="text-white">{{ block.settings.month }}</h4>
                    </div>
                    <div class="flex flex-col">
                      {% if block.settings.artist != blank %}
                        <p class="text-[13px] text-[#feffee] dark:text-black bg-[#131313] dark:bg-[#feffee] w-fit px-4 rounded-full mb-2 mt-1">{{ block.settings.artist }}</p>
                      {% endif %}
                      {% if block.settings.title != blank %}
                        <p class="text-2xl text-black dark:text-[#feffee]">{{ block.settings.title }}</p>
                      {% endif %}
                      {% if block.settings.location != blank %}
                        <p class="dark:text-[#9e9e9e] text-xl">{{ block.settings.location }}</p>
                      {% endif %}
                    </div>
                  </div>
                </div>
            {% endcase %}
          {% endfor %}
        </div>

        {% for block in section.blocks %}
          {% case block.type %}
            {% when 'events_cta' %}
              <div class="" {{ block.shopify_attributes }}>
                <a href="{{ block.settings.cta_url }}" class="block border-2 border-black bg-black text-[#feffee] dark:border-[#feffee] dark:text-[#feffee] shadow-md rounded-xl text-center mt-5 md:mt-3 h-fit py-3">
                  {{ block.settings.cta_text }}
                </a>
              </div>
          {% endcase %}
        {% endfor %}
      </div>

      {% comment %} VOLTAJE {% endcomment %}
      <div class="rounded-md text-center flex flex-col justify-center items-center py-14 md:py-0" style="background-color: #2EFF05">
        {% if section.settings.discover_primary_text != blank %}
          <h3 class="stalinist-one-regular text-black text-[10vw] leading-[10vw] md:text-[70px] md:leading-[70px] font-bold m-0">VOLTAJE</h3>
          <p class="stalinist-one-regular text-black text-[3.3vw] leading-[20px] md:text-[21px] mb-0">LABORATORIO DE SÍNTESIS</p>
        {% endif %}
        {% if section.settings.discover_secondary_text != blank %}
          <p class="stalinist-one-regular text-black text-[3.3vw] leading-[17px] md:text-[14px] mt-4">28 DE NOVIEMBRE | 7:00 PM | CARAMALA</p>
        {% endif %}
        <div class="flex gap-3">
          <a href="/pages/voltaje#registro" class="stalinist-one-regular text-xl text-black mt-5 border-2 border-black w-fit p-4 rounded-xl hover:border-3">REGISTRO</a>
          <a href="/pages/voltaje" class="stalinist-one-regular text-xl bg-black text-[#2EFF05] mt-5 border-2 border-black w-fit p-4 rounded-xl">VER MAS</a>
        </div>

      </div>
    </div>
  </div>


  {% comment %} CAROUSEL DE PRODUCTOS {% endcomment %}
  <div class="mb-10">
    {% if section.settings.products_title != blank %}
      <h2 class="text-[27px] md:text-[40px] font-medium mb-5 md:mb-7 text-black dark:text-[#feffee] tracking-[-1.3px]">
        {{ section.settings.products_title }}
      </h2>
    {% endif %}

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css">

    <div class="product-carousel-wrapper relative">
      <div class="swiper productCarousel">
        <div class="swiper-wrapper">
          {% comment %} Primero mostramos productos de la colección si está seleccionada {% endcomment %}
          {% if section.settings.product_collection != blank %}
            {% assign collection = section.settings.product_collection %}
            {% for product in collection.products limit: 12 %}
              <div class="swiper-slide">
                <a href="{{ product.url }}" class="block group">
                  <div class="border border-black dark:bg-white/5 rounded-2xl overflow-hidden hover:bg-white/10 transition-all duration-300">
                    <!-- Imagen del producto -->
                    <div class="relative aspect-square overflow-hidden bg-gray-800">
                      {% if product.featured_image %}
                        <img
                          src="{{ product.featured_image | image_url: width: 500 }}"
                          alt="{{ product.title | escape }}"
                          class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"
                          loading="lazy"
                          width="500"
                          height="500">
                      {% else %}
                        <div class="w-full h-full flex items-center justify-center bg-gray-700">
                          <span class="text-gray-400 text-sm">Sin imagen</span>
                        </div>
                      {% endif %}

                      {% if product.compare_at_price > product.price %}
                        <div class="absolute top-4 right-4 bg-red-500 text-white px-3 py-1 rounded-full text-sm font-semibold">
                          OFERTA
                        </div>
                      {% endif %}
                    </div>

                    <!-- Info del producto -->
                    <div class="p-4">
                      <h3 class="text-black dark:text-[#feffee] text-2xl font-medium mb-2 line-clamp-2">
                        {{ product.title }}
                      </h3>

                      <div class="flex items-center gap-2 mb-3">
                        {% if product.compare_at_price > product.price %}
                          <span class="text-black dark:text-[#feffee] line-through text-sm">
                            {{ product.compare_at_price | money }}
                          </span>
                        {% endif %}
                        <span class="text-black dark:text-[#feffee] text-xl font-semibold">
                          {{ product.price | money }}
                        </span>
                      </div>

                      <button class="w-full bg-black dark:bg-[#feffee] text-[#feffee] dark:text-black py-2 px-4 rounded-lg hover:bg-gray-200 transition-colors font-medium">
                        Ver producto
                      </button>
                    </div>
                  </div>
                </a>
              </div>
            {% endfor %}
          {% endif %}

          {% comment %} Luego mostramos productos individuales agregados manualmente {% endcomment %}
          {% for block in section.blocks %}
            {% if block.type == 'product' and block.settings.product != blank %}
              {% assign product = block.settings.product %}
              <div class="swiper-slide" {{ block.shopify_attributes }}>
                <a href="{{ product.url }}" class="block group">
                  <div class="bg-white/5 rounded-2xl overflow-hidden hover:bg-white/10 transition-all duration-300">
                    <!-- Imagen del producto -->
                    <div class="relative aspect-square overflow-hidden bg-gray-800">
                      {% if product.featured_image %}
                        <img
                          src="{{ product.featured_image | image_url: width: 500 }}"
                          alt="{{ product.title | escape }}"
                          class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"
                          loading="lazy"
                          width="500"
                          height="500">
                      {% else %}
                        <div class="w-full h-full flex items-center justify-center bg-gray-700">
                          <span class="text-gray-400 text-sm">Sin imagen</span>
                        </div>
                      {% endif %}

                      {% if product.compare_at_price > product.price %}
                        <div class="absolute top-4 right-4 bg-red-500 text-white px-3 py-1 rounded-full text-sm font-semibold">
                          OFERTA
                        </div>
                      {% endif %}
                    </div>

                    <!-- Info del producto -->
                    <div class="p-4">
                      <h3 class="text-black dark:text-[#feffee] text-xl font-medium mb-2 line-clamp-2">
                        {{ product.title }}
                      </h3>

                      <div class="flex items-center gap-2 mb-3">
                        {% if product.compare_at_price > product.price %}
                          <span class="text-gray-400 line-through text-sm">
                            {{ product.compare_at_price | money }}
                          </span>
                        {% endif %}
                        <span class="text-white text-xl font-semibold">
                          {{ product.price | money }}
                        </span>
                      </div>

                      <button class="w-full bg-white text-black py-2 px-4 rounded-lg hover:bg-gray-200 transition-colors font-medium">
                        Ver producto
                      </button>
                    </div>
                  </div>
                </a>
              </div>
            {% endif %}
          {% endfor %}
        </div>

        <!-- Navegación -->
        <div class="swiper-button-next !text-black dark:!text-white !w-12 !h-12 !bg-white/10 !rounded-full hover:!bg-white/20 transition-colors after:!text-[20px]"></div>
        <div class="swiper-button-prev !text-black dark:!text-white !w-12 !h-12 !bg-white/10 !rounded-full hover:!bg-white/20 transition-colors after:!text-[20px]"></div>

        <!-- Paginación -->
        <div class="swiper-pagination !bottom-0 !relative !mt-8"></div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js" defer></script>
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        if (typeof Swiper !== 'undefined') {
          const productCarousel = new Swiper('.productCarousel', {
            slidesPerView: 1,
            spaceBetween: 20,
            loop: true,
            speed: 600,
            navigation: {
              nextEl: '.swiper-button-next',
              prevEl: '.swiper-button-prev',
            },
            pagination: {
              el: '.swiper-pagination',
              clickable: true,
            },
            breakpoints: {
              640: {
                slidesPerView: 2,
                spaceBetween: 20,
              },
              768: {
                slidesPerView: 3,
                spaceBetween: 30,
              },
              1024: {
                slidesPerView: 4,
                spaceBetween: 30,
              },
            },
          });
        }
      });
    </script>

    <style>
      .line-clamp-2 {
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
      }

      .swiper-button-next,
      .swiper-button-prev {
        transition: all 0.3s ease;
      }

      .dark .swiper-pagination-bullet-active {
        opacity: 1 !important;
      }

      .swiper-pagination-bullet-active {
        opacity: 1 !important;
      }

      .swiper-pagination-bullet {
        background: black;
        opacity: 0.5;
      }

      .dark .swiper-pagination-bullet {
        background: white;
        opacity: 0.5;
      }


    </style>
  </div>


  {% comment %} DESCRUBRE {% endcomment %}

  <div class="flex flex-col mb-10">
    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 min-h-[50vh]">

      <div class="h-full flex flex-col">
        {% if section.settings.discover_title != blank %}
          <h2 class="text-[27px] md:text-[40px] text-black dark:text-[#feffee] font-medium mb-4 md:mb-7">
            {{ section.settings.discover_title }}
          </h2>
        {% endif %}
        <div class="rounded-md text-center flex-1 flex flex-col items-center justify-center py-32 md:py-0 bg-black dark:bg-[#feffee]">
          {% if section.settings.discover_primary_text != blank %}
            <h3 class="josefin-sans-title text-[#feffee] dark:text-black text-[21vw] leading-[15vw] md:text-[120px] md:leading-[100px] font-bold m-0">{{ section.settings.discover_primary_text }}</h3>
          {% endif %}
          <div class="flex gap-3 md:gap-8 text-[3.5vw] leading-[3.5vw] md:text-[19px] text-[#feffee] dark:text-black">
            <div class="flex">
              <span class="font-medium">LA</span>
              <span class="font-light">BORATORIO</span>
            </div>
            <div class="flex">
              <span class="font-medium">CR</span>
              <span class="font-light">EATIVO</span>
            </div>
            <div class="flex">
              <span class="font-medium">A</span>
              <span class="font-light">UDIOVISUAL</span>
            </div>
          </div>
          <div class="flex justify-center gap-3 w-full max-w-[73%] mt-4">
            <a href="/pages/lacra" class="josefin-sans-title w-full text-[17px] leading-[16px] text-[#feffee] dark:text-black border-2 border-[#feffee] dark:border-black w-fit px-4 py-5 pb-4 h-fit rounded-xl">PROYECTOS</a>
            <a href="/pages/lacra" class="josefin-sans-title w-full text-[17px] leading-[16px] text-black bg-[#feffee] dark:bg-black dark:text-[#FEFFEE] border-2 border-black w-fit px-4 py-5 pb-4 h-fit rounded-xl">MERCA</a>
          </div>
        </div>
      </div>


      <div class="h-full flex flex-col">
        {% if section.settings.discover_title != blank %}
          <h2 class="text-[27px] md:text-[40px] text-black dark:text-[#feffee] font-medium mb-4 md:mb-7">
            creadorxs
          </h2>
        {% endif %}
        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-7 flex-1 border border-black dark:bg-white/10 rounded-3xl px-5 py-7">
          {% for block in section.blocks %}
            {% if block.type == 'new_creation' %}
              <a
                href="/pages/creadores"
                class="flex flex-col justify-start items-start h-full gap-x-3 gap-y-7 items-center rounded-xl"
                {{ block.shopify_attributes }}>
                <div class="w-full w-48 h-48 overflow-hidden rounded-full">
                  <img
                    src="{{ block.settings.new_creation__image | image_url: width: 300 }}"
                    alt="{{ block.settings.new_creation__title }}"
                    class="w-full h-full object-cover"
                    width="300"
                    height="300">
                </div>
              </a>
            {% endif %}
          {% endfor %}
        </div>
      </div>

    </div>
  </div>


</div>


<style>

  .roxyhome {
    background: linear-gradient(180deg, #0F0C3B 0%, #403B88 45%, #F28B2B 100%);
    color: #fff;
  }

  .roxycounter {
    background-image: url('https://cdn.shopify.com/s/files/1/0700/8623/0213/files/counter.png?v=1748993160');
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
  }


  .home__title strong {
    font-weight: 400;
    line-height: 70px;
  }
  .home__title p {
    font-weight: 100;
    line-height: 70px;
  }

  @media (max-width: 480px) {
    .home__title p {
      font-weight: 100;
      line-height: 40px;
    }
  }
</style>
<style>
  .josefin-sans-title {
    font-family: "Josefin Sans"
    , sans-serif !important;
    font-optical-sizing: auto;
    font-weight: 500;
    font-style: normal;
  }

  .stalinist-one-regular {
    font-family: "Stalinist One"
    , sans-serif;
  }
</style>
<script>
  const countdown = () => {
    const targetDate = new Date("June 21, 2025 00:00:00").getTime();
    const now = new Date().getTime();
    const distance = targetDate - now;

    if (distance < 0) return;

    const days = Math.floor(distance / (1000 * 60 * 60 * 24));
    const hours = Math.floor((distance / (1000 * 60 * 60)) % 24);
    const minutes = Math.floor((distance / (1000 * 60)) % 60);
    const seconds = Math.floor((distance / 1000) % 60);

    document.getElementById("days").innerText = days;
    document.getElementById("hours").innerText = hours.toString().padStart(2, '0');
    document.getElementById("minutes").innerText = minutes.toString().padStart(2, '0');
    document.getElementById("seconds").innerText = seconds.toString().padStart(2, '0');
  };

  setInterval(countdown, 1000);
  countdown();
</script>
{% schema %}
  {
    "name": "Home",
    "settings": [
      {
        "type": "text",
        "id": "events_title",
        "label": "Título - Eventos",
        "default": "eventos"
      },
      {
        "type": "text",
        "id": "discover_title",
        "label": "Título - Descubre",
        "default": "descubre"
      },
      {
        "type": "text",
        "id": "discover_primary_text",
        "label": "Texto Principal - Descubre",
        "default": "LACRA"
      },
      {
        "type": "text",
        "id": "discover_secondary_text",
        "label": "Texto Secundario - Descubre",
        "default": "LABORATORIO CREATIVO AUDIOVISUAL"
      }, {
        "type": "color",
        "id": "discover_bg_color",
        "label": "Color de fondo - Descubre",
        "default": "#FEFFEE"
      }, {
        "type": "url",
        "id": "discover_link_url",
        "label": "URL de Descubre (opcional)"
      }, {
        "type": "text",
        "id": "latest_title",
        "label": "Título - Últimas publicaciones",
        "default": "últimas publicaciones"
      }, {
        "type": "text",
        "id": "products_title",
        "label": "Título - Productos",
        "default": "merca"
      }, {
        "type": "collection",
        "id": "product_collection",
        "label": "Colección de productos (opcional)",
        "info": "Si seleccionas una colección, se mostrarán hasta 12 productos de ella. También puedes agregar productos individuales con bloques."
      }
    ],
    "blocks": [
      {
        "type": "event",
        "name": "Evento",
        "settings": [
          {
            "type": "text",
            "id": "artist",
            "label": "Artista / Organizador",
            "default": "Nombre"
          },
          {
            "type": "text",
            "id": "day",
            "label": "Día",
            "default": "01"
          },
          {
            "type": "text",
            "id": "month",
            "label": "Mes (abr, may)",
            "default": "ene"
          },
          {
            "type": "text",
            "id": "title",
            "label": "Título del evento",
            "default": "Título del evento"
          }, {
            "type": "text",
            "id": "location",
            "label": "Ubicación",
            "default": "Ciudad, País • Lugar"
          }, {
            "type": "checkbox",
            "id": "muted",
            "label": "Atenuar (50% opacidad)",
            "default": false
          }
        ]
      }, {
        "type": "events_cta",
        "name": "CTA Eventos",
        "settings": [
          {
            "type": "text",
            "id": "cta_text",
            "label": "Texto CTA",
            "default": "solicitar un evento +"
          }, {
            "type": "url",
            "id": "cta_url",
            "label": "URL CTA"
          }
        ]
      }, {
        "type": "new_creation",
        "name": "New Creation",
        "settings": [
          {
            "type": "image_picker",
            "id": "new_creation__image",
            "label": "Imagen"
          }, {
            "type": "text",
            "id": "new_creation__title",
            "label": "Título",
            "default": "Nueva creadora"
          }, {
            "type": "text",
            "id": "new_creation__subtitle",
            "label": "Subtítulo",
            "default": "por roxaaanne"
          }, {
            "type": "url",
            "id": "new_creation__link",
            "label": "Enlace"
          }
        ]
      }, {
        "type": "product",
        "name": "Producto",
        "settings": [
          {
            "type": "product",
            "id": "product",
            "label": "Seleccionar producto"
          }
        ]
      }
    ]
  }
{% endschema %}